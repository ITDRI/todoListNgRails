<div class="overlay" (click)="hideModal.emit()"></div>

<div class="modal-wrapper">
  <div class="modal_title">{{title}}</div>
  <form [formGroup]="createTodoform" (ngSubmit)="submit()">
    <mat-form-field>
      <mat-label>Название задачи</mat-label>
      <input type="email" matInput formControlName="todoTitleFormControl" placeholder="Название задачи...">
      <mat-error *ngIf="createTodoform.get('todoTitleFormControl').hasError('required')">
        Пожалуйста введите <strong>название задачи</strong>
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Категория</mat-label>
      <mat-select required formControlName="projectIdFormControl">
        <mat-option>--</mat-option>
        <mat-option *ngFor="let project of projects" [value]=" project.id">{{project.title}}</mat-option>
        <mat-option value="new">Создать новую категорию</mat-option>
      </mat-select>
      <mat-error *ngIf="createTodoform.get('projectIdFormControl').hasError('required')">
        Необходимо указать название категории для новой задачи
      </mat-error>
    </mat-form-field>

    <mat-form-field *ngIf="createTodoform.get('projectIdFormControl').value == 'new'">
      <mat-label>Название категории</mat-label>
      <input type="email" matInput formControlName="projectTitleFormControl" placeholder="Название новой категории...">
      <mat-error *ngIf="createTodoform.get('projectTitleFormControl').hasError('required')">
        Пожалуйста введите <strong>название новой категории</strong>
      </mat-error>
    </mat-form-field>

    <fieldset>
      <button mat-raised-button (click)=" hideModal.emit()" type="button">Отмена</button>
      <button mat-raised-button color="primary" type="submit" [disabled]="createTodoform.invalid">OK</button>
    </fieldset>
  </form>
</div>
